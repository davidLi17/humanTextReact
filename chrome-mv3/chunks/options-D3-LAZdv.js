import{r as d,R as c,b as p,j as t,a as T}from"./browser-BCb2jFuL.js";const C={baseUrl:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",model:"kimi-k2-250711",temperature:.7,promptTemplate:"System Prompt(系统提示词): 1. 用通俗易懂的中文解释以下内容(就是说人话,如果遇到英文缩写记得解释,比如OKR说成OKR(Object Key Value))。2. 而且输出内容一定要带合乎情理的 Emoji 优化我的阅读体验。3. 对话中不要出现System Prompt里面出现的任何内容,润物细无声。",apiKey:"your_api_key"};var A=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function N(e,o){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);o&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,s)}return i}function O(e){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?N(Object(i),!0).forEach(function(s){K(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function K(e,o,i){return o in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i,e}function M(e,o){if(e==null)return{};var i=_(e,o),s,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],!(o.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function _(e,o){if(e==null)return{};var i={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(o.indexOf(n)>=0)&&(i[n]=e[n]);return i}var z={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function D(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function U(e,o,i){var s=typeof o.fill=="string"?[o.fill]:o.fill||[],n=[],a=o.theme||i.theme;switch(a){case"outline":n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push("none"),n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push("none");break;case"filled":n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push("#FFF"),n.push("#FFF");break;case"two-tone":n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push(typeof s[1]=="string"?s[1]:i.colors.twoTone.twoTone),n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push(typeof s[1]=="string"?s[1]:i.colors.twoTone.twoTone);break;case"multi-color":n.push(typeof s[0]=="string"?s[0]:"currentColor"),n.push(typeof s[1]=="string"?s[1]:i.colors.multiColor.outFillColor),n.push(typeof s[2]=="string"?s[2]:i.colors.multiColor.innerStrokeColor),n.push(typeof s[3]=="string"?s[3]:i.colors.multiColor.innerFillColor);break}return{size:o.size||i.size,strokeWidth:o.strokeWidth||i.strokeWidth,strokeLinecap:o.strokeLinecap||i.strokeLinecap,strokeLinejoin:o.strokeLinejoin||i.strokeLinejoin,colors:n,id:e}}var P=d.createContext(z);P.Provider;function I(e,o,i){return function(s){var n=s.size,a=s.strokeWidth,x=s.strokeLinecap,f=s.strokeLinejoin,v=s.theme,k=s.fill,g=s.className,j=s.spin,b=M(s,A),m=d.useContext(P),y=d.useMemo(D,[]),h=U(y,{size:n,strokeWidth:a,strokeLinecap:x,strokeLinejoin:f,theme:v,fill:k},m),u=[m.prefix+"-icon"];return u.push(m.prefix+"-icon-"+e),o&&m.rtl&&u.push(m.prefix+"-icon-rtl"),j&&u.push(m.prefix+"-icon-spin"),g&&u.push(g),c.createElement("span",O(O({},b),{},{className:u.join(" ")}),i(h))}}const R=I("preview-close",!1,function(e){return c.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},c.createElement("path",{d:"M6 16C6.63472 17.2193 7.59646 18.3504 8.82276 19.3554C12.261 22.1733 17.779 24 24 24C30.221 24 35.739 22.1733 39.1772 19.3554C40.4035 18.3504 41.3653 17.2193 42 16",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M28.9775 24L31.048 31.7274",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M37.3535 21.3536L43.0103 27.0104",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M5.00004 27.0103L10.6569 21.3534",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M16.9278 31.7276L18.9983 24.0001",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),B=I("preview-close-one",!0,function(e){return c.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},c.createElement("path",{d:"M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),c.createElement("path",{d:"M42 42L6 6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),S=["deepseek-reasoner","deepseek-chat","deepseek-r1-250528","deepseek-v3-250324","deepseek-v3-1-250821","kimi-k2-250711","doubao-seed-1-6-thinking-250715","doubao-seed-1-6-flash-250715","doubao-seed-1-6-250615","doubao-embedding-large-text-240915"],w=[{name:"DeepSeek",url:"https://api.deepseek.com/v1/chat/completions"},{name:"火山引擎",url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions"},{name:"自定义地址",url:""}],F=[{name:"DeepSeek平台",url:"https://platform.deepseek.com/api_keys"},{name:"火山引擎平台",url:"https://console.volcengine.com/ark/region:ark+cn-beijing/model?vendor=Bytedance&view=CARD_VIEW&projectName=default"},{name:"自定义地址",url:""}];function $(){const[e,o]=d.useState(C),[i,s]=d.useState(!0),[n,a]=d.useState("idle"),[x,f]=d.useState(""),[v,k]=d.useState("idle"),[g,j]=d.useState("");d.useEffect(()=>{b(),m()},[]);const b=async()=>{try{let r=await p.storage.sync.get(["apiKey","baseUrl","model","temperature","promptTemplate"]);Object.keys(r).length===0&&(r=await p.storage.local.get(["apiKey","baseUrl","model","temperature","promptTemplate"])),Object.keys(r).length>0&&o(l=>({...l,...r}))}catch(r){console.error("加载设置失败:",r)}},m=async()=>{try{const l=(await p.commands.getAll()).find(L=>L.name==="translate-selection");l&&l.shortcut&&f(l.shortcut)}catch(r){console.error("加载快捷键失败:",r)}},y=async()=>{a("saving");try{await Promise.all([p.storage.sync.set(e),p.storage.local.set(e)]),a("saved"),setTimeout(()=>a("idle"),2e3)}catch(r){console.error("保存设置失败:",r),a("error"),setTimeout(()=>a("idle"),2e3)}},h=(r,l)=>{o(L=>({...L,[r]:l}))},u=()=>{p.tabs.create({url:"chrome://extensions/shortcuts"})},W=async()=>{k("testing"),j("正在测试API连接...");try{const r=await p.runtime.sendMessage({action:"testApiConnection",apiKey:e.apiKey,baseUrl:e.baseUrl||"https://api.deepseek.com/v1/chat/completions",model:e.model||"deepseek-reasoner"});r.success?(k("success"),j("✅ API连接测试成功！")):(k("error"),j(`❌ 连接失败: ${r.error}`))}catch(r){k("error"),j(`❌ 测试失败: ${r.message||"未知错误"}`)}},E=()=>{confirm("确定要重置所有设置为默认值吗？")&&o(C)};return t.jsxs("div",{className:"options-container",children:[t.jsxs("div",{className:"options-header",children:[t.jsx("h1",{children:"人话翻译器 - 设置"}),t.jsx("p",{children:"配置你的翻译服务和偏好设置"})]}),t.jsxs("div",{className:"options-content",children:[t.jsxs("div",{className:"settings-section",children:[t.jsx("h2",{children:"API 设置"}),t.jsxs("div",{className:"setting-item",children:[t.jsx("label",{htmlFor:"apiKey",children:"API Key *"}),t.jsxs("div",{className:"api-key-input-group",children:[t.jsx("input",{type:i?"text":"password",id:"apiKey",value:e.apiKey,onChange:r=>h("apiKey",r.target.value),placeholder:"请输入你的 API Key"}),t.jsx("button",{type:"button",className:"toggle-api-key-btn",onClick:()=>s(!i),children:i?t.jsx(R,{theme:"outline",size:"20",fill:"#06A17E",strokeLinejoin:"bevel",strokeLinecap:"square"}):t.jsx(B,{theme:"outline",size:"20",fill:"#06A17E",strokeLinejoin:"bevel",strokeLinecap:"square"})}),t.jsx("button",{className:"test-api-btn",onClick:W,disabled:!e.apiKey.trim(),children:"测试连接"})]}),t.jsxs("div",{className:"setting-hint",children:["获取API Key:"," ",F.map((r,l)=>t.jsxs("span",{children:[t.jsx("a",{className:"api-platform-hint",href:r.url,target:"_blank",rel:"noopener noreferrer",children:r.name}),l<F.length-1&&", "]},r.name))]}),v!=="idle"&&t.jsx("div",{className:`test-status ${v}`,children:g})]}),t.jsxs("div",{className:"setting-item",children:[t.jsx("label",{htmlFor:"baseUrl",children:"API 地址"}),t.jsx("input",{type:"text",id:"baseUrl",value:e.baseUrl,onChange:r=>h("baseUrl",r.target.value),placeholder:"https://api.deepseek.com/v1/chat/completions"}),t.jsxs("div",{className:"setting-hint",children:["支持的API服务:",w.map((r,l)=>t.jsxs("span",{children:[t.jsx("span",{className:"api-hint",onClick:()=>h("baseUrl",r.url),children:r.name}),l<w.length-1&&", "]},r.name))]})]}),t.jsxs("div",{className:"setting-item",children:[t.jsx("label",{htmlFor:"model",children:"模型 ID"}),t.jsx("input",{type:"text",id:"model",value:e.model,onChange:r=>h("model",r.target.value),placeholder:"请输入模型ID，如：deepseek-reasoner"}),t.jsxs("div",{className:"setting-hint",children:["常用模型ID:",t.jsx("div",{className:"model-hint-container",children:S.map((r,l)=>t.jsxs("span",{children:[t.jsx("span",{className:"model-hint",onClick:()=>h("model",r),children:r},r),l<S.length-1&&", "]},r))})]})]}),t.jsxs("div",{className:"setting-item",children:[t.jsxs("label",{htmlFor:"temperature",children:["Temperature (",e.temperature,")"]}),t.jsx("input",{type:"range",id:"temperature",min:"0",max:"2",step:"0.1",value:e.temperature,onChange:r=>h("temperature",parseFloat(r.target.value))}),t.jsx("div",{className:"setting-hint",children:"控制回答的创造性，值越小回答越确定"})]})]}),t.jsxs("div",{className:"settings-section",children:[t.jsx("h2",{children:"提示词设置"}),t.jsxs("div",{className:"setting-item",children:[t.jsx("label",{htmlFor:"promptTemplate",children:"提示词模板"}),t.jsx("textarea",{id:"promptTemplate",value:e.promptTemplate,onChange:r=>h("promptTemplate",r.target.value),placeholder:"请输入提示词模板，使用 {text} 作为占位符",rows:4}),t.jsxs("div",{className:"setting-hint",children:["使用 ","{text}"," 作为待翻译文本的占位符"]})]})]}),t.jsxs("div",{className:"settings-section",children:[t.jsx("h2",{children:"快捷键设置"}),t.jsxs("div",{className:"setting-item",children:[t.jsx("label",{children:"当前快捷键"}),t.jsx("div",{className:"shortcut-display",children:x||"未设置"}),t.jsx("button",{className:"shortcut-btn",onClick:u,children:"修改快捷键"}),t.jsx("div",{className:"setting-hint",children:"点击按钮打开Chrome扩展快捷键设置页面"})]})]})]}),t.jsxs("div",{className:"options-footer",children:[t.jsxs("div",{className:"button-group",children:[t.jsx("button",{className:"reset-btn",onClick:E,children:"重置默认"}),t.jsxs("button",{className:`save-btn ${n}`,onClick:y,disabled:n==="saving",children:[n==="saving"&&"保存中...",n==="saved"&&"已保存",n==="error"&&"保存失败",n==="idle"&&"保存设置"]})]}),n==="saved"&&t.jsx("div",{className:"save-success",children:"设置已保存成功！"}),n==="error"&&t.jsx("div",{className:"save-error",children:"保存失败，请重试"})]})]})}const G=T.createRoot(document.getElementById("root"));G.render(t.jsx(c.StrictMode,{children:t.jsx($,{})}));
